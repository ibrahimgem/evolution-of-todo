# Default values for todo-chatbot Helm chart
# [Task]: T013
# [From]: specs/004-local-k8s-deployment/spec.md §US3, plan.md §DD-004

# Global settings
global:
  # Image pull secrets for private registries
  imagePullSecrets: []

# Frontend configuration
frontend:
  replicaCount: 1

  image:
    repository: todo-chatbot-frontend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: NodePort
    port: 3000
    nodePort: 30080

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  # Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /api/healthz
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 30
    timeoutSeconds: 3
    failureThreshold: 3

  # Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /api/healthz
      port: 3000
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # Environment variables
  env:
    NODE_ENV: production
    NEXT_TELEMETRY_DISABLED: "1"

# Backend configuration
backend:
  replicaCount: 1

  image:
    repository: todo-chatbot-backend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 8000

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  # Liveness probe configuration
  livenessProbe:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 10
    periodSeconds: 30
    timeoutSeconds: 3
    failureThreshold: 3

  # Readiness probe configuration
  readinessProbe:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  # Environment variables
  env:
    PYTHONDONTWRITEBYTECODE: "1"
    PYTHONUNBUFFERED: "1"

# ConfigMap data (non-sensitive configuration)
config:
  # Frontend configuration
  NEXT_PUBLIC_API_URL: "http://backend:8000"

  # Backend configuration
  DATABASE_HOST: "localhost"
  DATABASE_PORT: "5432"
  DATABASE_NAME: "todo_chatbot"
  LOG_LEVEL: "INFO"

# Secret data (sensitive configuration - base64 encoded in templates)
secrets:
  # Database credentials
  DATABASE_USER: "postgres"
  DATABASE_PASSWORD: "changeme"

  # API keys (placeholder - override in deployment)
  OPENAI_API_KEY: ""
  JWT_SECRET: "your-jwt-secret-change-in-production"

# Ingress configuration
ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - host: todo-chatbot.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: backend
  tls: []

# Service account configuration
serviceAccount:
  create: true
  name: ""
  annotations: {}

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false
  capabilities:
    drop:
      - ALL

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
